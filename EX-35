import random
import string

def generate_key(length):
    """Generate a random key stream of integers between 0 and 26."""
    return [random.randint(0, 26) for _ in range(length)]

def encrypt(plaintext, key):
    """Encrypt plaintext using one-time pad Vigenère cipher."""
    ciphertext = []
    for i, ch in enumerate(plaintext.upper()):
        if ch in string.ascii_uppercase:
            p = ord(ch) - ord('A')  # map A=0,...Z=25
            c = (p + key[i]) % 26
            ciphertext.append(chr(c + ord('A')))
        else:
            ciphertext.append(ch)  # non-letters unchanged
    return ''.join(ciphertext)

def decrypt(ciphertext, key):
    """Decrypt ciphertext using one-time pad Vigenère cipher."""
    plaintext = []
    for i, ch in enumerate(ciphertext.upper()):
        if ch in string.ascii_uppercase:
            c = ord(ch) - ord('A')
            p = (c - key[i]) % 26
            plaintext.append(chr(p + ord('A')))
        else:
            plaintext.append(ch)
    return ''.join(plaintext)

# --- Demo ---
message = "HELLOVIGENERE"
key = generate_key(len(message))

print("Message:", message)
print("Key stream:", key)

cipher = encrypt(message, key)
print("Ciphertext:", cipher)

plain = decrypt(cipher, key)
print("Decrypted:", plain)
